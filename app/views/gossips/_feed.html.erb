<div class="column is-half">

  <% if user_signed_in? %>
    <article class="media box">
      <figure class="media-left">
        <p class="image is-64x64">
          <%= user_avatar_tag current_user %>
        </p>
      </figure>
      <div class="media-content">
        <%= render 'gossips/form' %>
      </div>
    </article>
  <% end %>

  <h3 class="title is-3"><%= t '.title' %></h3>

  <% @gossips.each do |gossip| %>
    <div class="box">
      <article class="media">
      <figure class="media-left">
        <p class="image is-64x64">
          <%= user_avatar_tag gossip.user %>
        </p>
      </figure>
      <div class="media-content">
        <div class="content">
          <strong><%= gossip.user.name %></strong>
          <small><%= at_username gossip.user %></small>
          <p><%= gossip.message %></p>
        </div>

        <nav class="level">
          <div class="level-left is-mobile">

            <% if gossip.comments.count > 0 %>
              <%= link_to gossip, :class => "mr10" do %>
                <i class="fa fa-comment" aria-hidden="true"></i>
                <span class="has-text-info mr30"><%= gossip.comments.count %></span>
              <% end %>
            <% else %>
              <%= link_to gossip, :class => "mr30" do %>
                <i class="fa fa-comment-o" aria-hidden="true"></i>
              <% end %>
            <% end %>
          </div>

          <div class="level-right is-mobile">
            <% if user_signed_in? && current_user.id == gossip.user.id %>
              <%= link_to edit_gossip_path(gossip), :class => "mr30" do %>
                <i class="fa fa-pencil" aria-hidden="true"></i>
              <% end %>
              <%= link_to gossip, method: :delete, :class => "mr30", data: { confirm: t('.delete_confirm') } do %>
                <i class="fa fa-trash-o" aria-hidden="true"></i>
              <% end %>
            <% end %>
          </div>
        </nav>
      </div>
      </article>
    </div>
  <% end %>
</div>
